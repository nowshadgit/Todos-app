{"ast":null,"code":"import _defineProperty from \"/home/nowshad/Desktop/Company Projects/footprints/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/nowshad/Desktop/Company Projects/footprints/frontend/src/containers/AddEditOrgUnits/AddEditOrgUnits.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport pageConfig from '../../utils/pageConfig';\nimport { getActionsFormate } from '../../utils/common';\nimport AddEditOrgUnitsForm from '../../components/AddEditOrgUnitsForm/AddEditOrgUnitsForm';\nimport ACTIONS from '../../apiConfig/actions.constants';\nimport { getErrorResMsg } from '../../utils/formValidations';\nimport { PAGE, STORE } from '../../utils/constants';\n\nclass AddEditOrgUnits extends React.Component {\n  constructor(props) {\n    super(props);\n    this.ORG_UNIT_FIELD_ID = 'org-unit-name';\n    this.PARENT_FIELD_ID = 'parent-field';\n\n    this.enableSubmit = (orgUnitName, parent) => {\n      const disabled = !(orgUnitName.length > 0); //  && parent.length>0\n\n      if (this.props.errorCode) {\n        const type = ACTIONS.ORG_UNITS.RESET_STATE;\n        this.props.resetState(type);\n        this.setState({\n          errorCode: ''\n        });\n      }\n\n      this.setState({\n        disabled\n      });\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        [event.target.id]: event.target.value,\n        formErrors: {}\n      }, () => this.enableSubmit(this.state[this.ORG_UNIT_FIELD_ID], this.state[this.PARENT_FIELD_ID]));\n    };\n\n    this.handleParents = (currentNode, selectedNodes) => {\n      console.log('onChange::', currentNode, selectedNodes); // this.setState(\n      //   {\n      //     [this.PARENT_FIELD_ID]: event || [],\n      //     formErrors: {}\n      //   },\n      //   () =>\n      //     this.enableSubmit(\n      //       this.state[this.ORG_UNIT_FIELD_ID],\n      //       this.state[this.PARENT_FIELD_ID]\n      //     )\n      // );\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const data = {\n        name: this.state[this.ORG_UNIT_FIELD_ID],\n        parent: 1\n      };\n      const type = pageConfig[this.props.page].actions.postData;\n      this.props.submit(type, {\n        data,\n        props: _objectSpread({}, this.props)\n      });\n    };\n\n    this.onChange = (currentNode, selectedNodes) => {};\n\n    this.state = {\n      formErrors: {},\n      formValidity: false,\n      [this.ORG_UNIT_FIELD_ID]: '',\n      [this.PARENT_FIELD_ID]: '',\n      errorCode: '',\n      disabled: true,\n      data: []\n    };\n  }\n\n  componentDidMount() {\n    const _this$props = this.props,\n          getOrgUnit = _this$props.getOrgUnit,\n          page = _this$props.page;\n    const dtype = pageConfig[page].actions.getAllOrgUnit;\n    console.log(\"asdasd\", dtype);\n    getOrgUnit(dtype);\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const errorCode = nextProps.errorCode;\n\n    if (errorCode && errorCode !== prevState.errorCode) {\n      const errMsg = getErrorResMsg(errorCode, PAGE.ADD_ORG_UNIT);\n      return {\n        formErrors: errMsg,\n        errorCode\n      };\n    }\n\n    return prevState;\n  }\n\n  render() {\n    const _this$props2 = this.props,\n          page = _this$props2.page,\n          allOrgUnit = _this$props2.allOrgUnit;\n    const pageTitle = pageConfig[page].pageTitle;\n    return React.createElement(\"div\", {\n      className: \"add-edit-user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(PageHeader, {\n      title: pageTitle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(AddEditOrgUnitsForm, {\n      handleSubmit: this.handleSubmit,\n      formErrors: this.state.formErrors,\n      orgUnitFieldId: this.ORG_UNIT_FIELD_ID,\n      orgUnitFieldValue: this.state[this.ORG_UNIT_FIELD_ID],\n      handleParents: this.handleParents,\n      parentFieldValues: this.state[this.PARENT_FIELD_ID],\n      parentFieldIds: this.PARENT_FIELD_ID,\n      handleChange: this.handleChange,\n      disabled: this.state.disabled,\n      parentFieldData: allOrgUnit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }));\n  }\n\n}\n\nAddEditOrgUnits.propTypes = {\n  page: PropTypes.string.isRequired,\n  submit: PropTypes.func.isRequired,\n  errorCode: PropTypes.string.isRequired,\n  resetState: PropTypes.func.isRequired,\n  getOrgUnit: PropTypes.func.isRequired,\n  allOrgUnit: PropTypes.array.isRequired\n};\nAddEditOrgUnits.defaultProps = {};\n\nconst mapStateToProps = (state, props) => {\n  const page = props.page;\n  const getFormate = pageConfig[page].formates.orgUnits;\n  return {\n    errorCode: state.addEditOrgUnitReducerStore.errorCode,\n    allOrgUnit: getFormate(state.listReducerStore[STORE.ALL_ORG_UNIT])\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    submit: (type, data) => {\n      dispatch(getActionsFormate(type, data));\n    },\n    resetState: type => {\n      dispatch(getActionsFormate(type));\n    },\n    getOrgUnit: type => {\n      dispatch(getActionsFormate(type));\n    }\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(AddEditOrgUnits));","map":{"version":3,"sources":["/home/nowshad/Desktop/Company Projects/footprints/frontend/src/containers/AddEditOrgUnits/AddEditOrgUnits.jsx"],"names":["React","connect","withRouter","PropTypes","PageHeader","pageConfig","getActionsFormate","AddEditOrgUnitsForm","ACTIONS","getErrorResMsg","PAGE","STORE","AddEditOrgUnits","Component","constructor","props","ORG_UNIT_FIELD_ID","PARENT_FIELD_ID","enableSubmit","orgUnitName","parent","disabled","length","errorCode","type","ORG_UNITS","RESET_STATE","resetState","setState","handleChange","event","target","id","value","formErrors","state","handleParents","currentNode","selectedNodes","console","log","handleSubmit","preventDefault","data","name","page","actions","postData","submit","onChange","formValidity","componentDidMount","getOrgUnit","dtype","getAllOrgUnit","getDerivedStateFromProps","nextProps","prevState","errMsg","ADD_ORG_UNIT","render","allOrgUnit","pageTitle","propTypes","string","isRequired","func","array","defaultProps","mapStateToProps","getFormate","formates","orgUnits","addEditOrgUnitReducerStore","listReducerStore","ALL_ORG_UNIT","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport pageConfig from '../../utils/pageConfig';\nimport { getActionsFormate } from '../../utils/common';\nimport AddEditOrgUnitsForm from '../../components/AddEditOrgUnitsForm/AddEditOrgUnitsForm';\nimport ACTIONS from '../../apiConfig/actions.constants';\nimport { getErrorResMsg } from '../../utils/formValidations';\nimport { PAGE, STORE } from '../../utils/constants';\n\nclass AddEditOrgUnits extends React.Component {\n  ORG_UNIT_FIELD_ID = 'org-unit-name';\n\n  PARENT_FIELD_ID = 'parent-field';\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      formErrors: {},\n      formValidity: false,\n      [this.ORG_UNIT_FIELD_ID]: '',\n      [this.PARENT_FIELD_ID]: '',\n      errorCode: '',\n      disabled: true,\n      data: [],\n    };\n  }\n\n  componentDidMount() {\n    const { getOrgUnit, page } = this.props;\n    const dtype = pageConfig[page].actions.getAllOrgUnit;\n    console.log(\"asdasd\", dtype);\n    \n    getOrgUnit(dtype);\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { errorCode } = nextProps;\n    if (errorCode && errorCode !== prevState.errorCode) {\n      const errMsg = getErrorResMsg(errorCode, PAGE.ADD_ORG_UNIT);\n      return { formErrors: errMsg, errorCode };\n    }\n    return prevState;\n  }\n\n  enableSubmit = (orgUnitName, parent) => {\n    const disabled = !(orgUnitName.length > 0);\n    //  && parent.length>0\n    if (this.props.errorCode) {\n      const type = ACTIONS.ORG_UNITS.RESET_STATE;\n      this.props.resetState(type);\n      this.setState({ errorCode: '' });\n    }\n    this.setState({ disabled });\n  };\n\n  handleChange = event => {\n    this.setState(\n      {\n        [event.target.id]: event.target.value,\n        formErrors: {}\n      },\n      () =>\n        this.enableSubmit(\n          this.state[this.ORG_UNIT_FIELD_ID],\n          this.state[this.PARENT_FIELD_ID]\n        )\n    );\n  };\n\n  handleParents = (currentNode, selectedNodes) => {\n    console.log('onChange::', currentNode, selectedNodes);\n    // this.setState(\n    //   {\n    //     [this.PARENT_FIELD_ID]: event || [],\n    //     formErrors: {}\n    //   },\n    //   () =>\n    //     this.enableSubmit(\n    //       this.state[this.ORG_UNIT_FIELD_ID],\n    //       this.state[this.PARENT_FIELD_ID]\n    //     )\n    // );\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    const data = {\n      name: this.state[this.ORG_UNIT_FIELD_ID],\n      parent: 1\n    };\n    const type = pageConfig[this.props.page].actions.postData;\n    this.props.submit(type, { data, props: { ...this.props } });\n  };\n\n  onChange = (currentNode, selectedNodes) => {\n    \n  };\n\n  render() {\n    const { page, allOrgUnit } = this.props;\n    const { pageTitle } = pageConfig[page];\n\n    return (\n      <div className=\"add-edit-user\">\n        <PageHeader title={pageTitle} />\n        <AddEditOrgUnitsForm\n          handleSubmit={this.handleSubmit}\n          formErrors={this.state.formErrors}\n          orgUnitFieldId={this.ORG_UNIT_FIELD_ID}\n          orgUnitFieldValue={this.state[this.ORG_UNIT_FIELD_ID]}\n          handleParents={this.handleParents}\n          parentFieldValues={this.state[this.PARENT_FIELD_ID]}\n          parentFieldIds={this.PARENT_FIELD_ID}\n          handleChange={this.handleChange}\n          disabled={this.state.disabled}\n          parentFieldData={allOrgUnit}\n        />\n      </div>\n    );\n  }\n}\n\nAddEditOrgUnits.propTypes = {\n  page: PropTypes.string.isRequired,\n  submit: PropTypes.func.isRequired,\n  errorCode: PropTypes.string.isRequired,\n  resetState: PropTypes.func.isRequired,\n  getOrgUnit: PropTypes.func.isRequired,\n  allOrgUnit: PropTypes.array.isRequired\n};\n\nAddEditOrgUnits.defaultProps = {};\n\nconst mapStateToProps = (state, props) => {\n  const {page} = props;\n  const getFormate = pageConfig[page].formates.orgUnits;\n  return ({\n    errorCode: state.addEditOrgUnitReducerStore.errorCode,\n    allOrgUnit: getFormate(state.listReducerStore[STORE.ALL_ORG_UNIT])\n  })\n}\n  \nconst mapDispatchToProps = dispatch => {\n  return {\n    submit: (type, data) => {\n      dispatch(getActionsFormate(type, data));\n    },\n    resetState: type => {\n      dispatch(getActionsFormate(type));\n    },\n    getOrgUnit: (type) =>{\n      dispatch(getActionsFormate(type));\n    }\n  };\n};\n\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(AddEditOrgUnits)\n);\n"]},"metadata":{},"sourceType":"module"}