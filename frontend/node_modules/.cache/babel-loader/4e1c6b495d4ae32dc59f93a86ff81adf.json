{"ast":null,"code":"import _defineProperty from \"/home/nowshad/Desktop/Todo/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/home/nowshad/Desktop/Todo/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/nowshad/Desktop/Todo/frontend/src/containers/Login/Login.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport ACTIONS from '../../apiConfig/actions.constants';\nimport { LOGIN_FORM_HEADER, PAGE } from '../../utils/constants';\nimport AsOnboardingCard from '../../hocs/AsOnbaordingCard';\nimport LoginForm from '../../components/LoginForm/LoginForm';\nimport { rememberUserCookie, TODOS_ROUTE } from '../../config';\nimport { getRememberMe } from '../../utils/authService';\nimport { checkEmail, checkPassword, getErrorResMsg } from '../../utils/formValidations';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.EMAIL_FIELD_ID = 'todo-email';\n    this.PASSWORD_FIELD_ID = 'todo-password';\n\n    this.enableSignIn = (email, password) => {\n      const disabled = !(email.length > 0 && password.length > 0);\n      this.setState({\n        submitDisabled: disabled\n      });\n    };\n\n    this.validateForm = () => {\n      const _checkEmail = checkEmail(this.state[this.EMAIL_FIELD_ID], 'Email'),\n            _checkEmail2 = _slicedToArray(_checkEmail, 2),\n            emailValidity = _checkEmail2[0],\n            emailErrors = _checkEmail2[1];\n\n      const _checkPassword = checkPassword(this.state[this.PASSWORD_FIELD_ID], 'Password'),\n            _checkPassword2 = _slicedToArray(_checkPassword, 2),\n            passwordValidity = _checkPassword2[0],\n            passwordErrors = _checkPassword2[1];\n\n      const formValidity = emailValidity && passwordValidity;\n\n      const formErrors = _objectSpread({}, emailErrors, {}, passwordErrors);\n\n      this.setState({\n        formValidity,\n        formErrors\n      });\n      return formValidity;\n    };\n\n    this.handleInvalidKeys = event => {\n      if (event.key === ' ') {\n        event.preventDefault();\n      }\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        [event.target.id]: event.target.value,\n        formErrors: {}\n      }, () => this.enableSignIn(this.state[this.EMAIL_FIELD_ID], this.state[this.PASSWORD_FIELD_ID]));\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      this.props.dispatch({\n        type: ACTIONS.AUTH.RESET_STATE\n      });\n\n      if (this.validateForm()) {\n        const data = {\n          email: this.state[this.EMAIL_FIELD_ID],\n          password: this.state[this.PASSWORD_FIELD_ID]\n        };\n        this.login(data);\n      }\n    };\n\n    this.login = data => {\n      this.setState({\n        errorCode: ''\n      });\n      this.props.dispatch({\n        type: ACTIONS.AUTH.LOGIN,\n        data\n      });\n    };\n\n    this.state = {\n      formErrors: {},\n      rememberMe: false,\n      formValidity: false,\n      submitDisabled: true,\n      [this.EMAIL_FIELD_ID]: '',\n      [this.PASSWORD_FIELD_ID]: '',\n      errorCode: ''\n    };\n  }\n\n  componentDidMount() {\n    if (getRememberMe(rememberUserCookie)) {\n      this.props.history.push(TODOS_ROUTE.TODOS.LIST);\n    }\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const errorCode = nextProps.login.error.errorCode;\n\n    if (errorCode && errorCode !== prevState.errorCode) {\n      const errMsg = getErrorResMsg(errorCode, PAGE.LOGIN);\n      return {\n        formErrors: errMsg,\n        errorCode\n      };\n    }\n\n    return prevState;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"login-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"card-title todo-card-title mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, LOGIN_FORM_HEADER), React.createElement(\"div\", {\n      className: \"card-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(LoginForm, {\n      handleSubmit: this.handleSubmit,\n      handleChange: this.handleChange,\n      formErrors: this.state.formErrors,\n      emailFieldId: this.EMAIL_FIELD_ID,\n      disabled: this.state.submitDisabled,\n      formValidity: this.state.formValidity,\n      passwordFieldId: this.PASSWORD_FIELD_ID,\n      handleInvalidKeys: this.handleInvalidKeys,\n      emailValue: this.state[this.EMAIL_FIELD_ID],\n      passwordValue: this.state[this.PASSWORD_FIELD_ID],\n      inProgress: this.props.login.inProgress,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    })));\n  }\n\n}\n\nLogin.propTypes = {\n  dispatch: PropTypes.func.isRequired,\n  login: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired\n};\nLogin.defaultProps = {};\n\nconst mapStateToProps = state => ({\n  login: state.loginStore\n});\n\nexport default withRouter(connect(mapStateToProps)(AsOnboardingCard(Login)));","map":{"version":3,"sources":["/home/nowshad/Desktop/Todo/frontend/src/containers/Login/Login.jsx"],"names":["React","PropTypes","connect","withRouter","ACTIONS","LOGIN_FORM_HEADER","PAGE","AsOnboardingCard","LoginForm","rememberUserCookie","TODOS_ROUTE","getRememberMe","checkEmail","checkPassword","getErrorResMsg","Login","Component","constructor","props","EMAIL_FIELD_ID","PASSWORD_FIELD_ID","enableSignIn","email","password","disabled","length","setState","submitDisabled","validateForm","state","emailValidity","emailErrors","passwordValidity","passwordErrors","formValidity","formErrors","handleInvalidKeys","event","key","preventDefault","handleChange","target","id","value","handleSubmit","dispatch","type","AUTH","RESET_STATE","data","login","errorCode","LOGIN","rememberMe","componentDidMount","history","push","TODOS","LIST","getDerivedStateFromProps","nextProps","prevState","error","errMsg","render","inProgress","propTypes","func","isRequired","object","defaultProps","mapStateToProps","loginStore"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\n\nimport ACTIONS from '../../apiConfig/actions.constants';\nimport { LOGIN_FORM_HEADER, PAGE } from '../../utils/constants';\nimport AsOnboardingCard from '../../hocs/AsOnbaordingCard';\nimport LoginForm from '../../components/LoginForm/LoginForm';\nimport { rememberUserCookie, TODOS_ROUTE } from '../../config';\nimport { getRememberMe } from '../../utils/authService';\nimport {\n  checkEmail,\n  checkPassword,\n  getErrorResMsg\n} from '../../utils/formValidations';\n\nclass Login extends React.Component {\n  EMAIL_FIELD_ID = 'todo-email';\n\n  PASSWORD_FIELD_ID = 'todo-password';\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      formErrors: {},\n      rememberMe: false,\n      formValidity: false,\n      submitDisabled: true,\n      [this.EMAIL_FIELD_ID]: '',\n      [this.PASSWORD_FIELD_ID]: '',\n      errorCode: ''\n    };\n  }\n\n  componentDidMount() {\n    if (getRememberMe(rememberUserCookie)) {\n      this.props.history.push(TODOS_ROUTE.TODOS.LIST);\n    }\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { errorCode } = nextProps.login.error;\n    if (errorCode && errorCode !== prevState.errorCode) {\n      const errMsg = getErrorResMsg(errorCode, PAGE.LOGIN);\n      return { formErrors: errMsg, errorCode };\n    }\n    return prevState;\n  }\n\n  enableSignIn = (email, password) => {\n    const disabled = !(email.length > 0 && password.length > 0);\n    this.setState({ submitDisabled: disabled });\n  };\n\n  validateForm = () => {\n    const [emailValidity, emailErrors] = checkEmail(\n      this.state[this.EMAIL_FIELD_ID],\n      'Email'\n    );\n    const [passwordValidity, passwordErrors] = checkPassword(\n      this.state[this.PASSWORD_FIELD_ID],\n      'Password'\n    );\n    const formValidity = emailValidity && passwordValidity;\n    const formErrors = { ...emailErrors, ...passwordErrors };\n\n    this.setState({ formValidity, formErrors });\n\n    return formValidity;\n  };\n\n  handleInvalidKeys = event => {\n    if (event.key === ' ') {\n      event.preventDefault();\n    }\n  };\n\n  handleChange = event => {\n    this.setState(\n      {\n        [event.target.id]: event.target.value,\n        formErrors: {}\n      },\n      () =>\n        this.enableSignIn(\n          this.state[this.EMAIL_FIELD_ID],\n          this.state[this.PASSWORD_FIELD_ID]\n        )\n    );\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    this.props.dispatch({ type: ACTIONS.AUTH.RESET_STATE });\n    if (this.validateForm()) {\n      const data = {\n        email: this.state[this.EMAIL_FIELD_ID],\n        password: this.state[this.PASSWORD_FIELD_ID]\n      };\n      this.login(data);\n    }\n  };\n\n  login = data => {\n    this.setState({ errorCode: '' });\n    this.props.dispatch({ type: ACTIONS.AUTH.LOGIN, data });\n  };\n\n  render() {\n    return (\n      <div className=\"login-container\">\n        <h4 className=\"card-title todo-card-title mb-5\">{LOGIN_FORM_HEADER}</h4>\n        <div className=\"card-text\">\n          <LoginForm\n            handleSubmit={this.handleSubmit}\n            handleChange={this.handleChange}\n            formErrors={this.state.formErrors}\n            emailFieldId={this.EMAIL_FIELD_ID}\n            disabled={this.state.submitDisabled}\n            formValidity={this.state.formValidity}\n            passwordFieldId={this.PASSWORD_FIELD_ID}\n            handleInvalidKeys={this.handleInvalidKeys}\n            emailValue={this.state[this.EMAIL_FIELD_ID]}\n            passwordValue={this.state[this.PASSWORD_FIELD_ID]}\n            inProgress={this.props.login.inProgress}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  dispatch: PropTypes.func.isRequired,\n  login: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired\n};\n\nLogin.defaultProps = {};\n\nconst mapStateToProps = state => ({\n  login: state.loginStore\n});\n\nexport default withRouter(connect(mapStateToProps)(AsOnboardingCard(Login)));\n"]},"metadata":{},"sourceType":"module"}