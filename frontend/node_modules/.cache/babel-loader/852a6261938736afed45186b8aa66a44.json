{"ast":null,"code":"var _jsxFileName = \"/home/nowshad/Desktop/Todo/frontend/src/containers/Todos/Todos.jsx\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport pageConfig from '../../utils/pageConfig';\nimport PageLoader from '../../components/PageLoader/PageLoader';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { getActionsFormate } from '../../utils/common';\nimport { onPagination, onPageChange } from '../../utils/utils';\nimport { DATA_NOT_FOUND } from '../../utils/constants';\nimport ACTIONS from '../../apiConfig/actions.constants';\nimport Todo from '../../components/Todo/Todo';\nimport DataNotFound from '../../components/DataNotFound/DataNotFound';\nimport { TODOS_ROUTE } from '../../config';\nimport { reverse } from 'named-urls';\nimport CustomPagination from '../../components/CustomPagination/CustomPagination';\n\nclass Todos extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchTodos = () => {\n      const _this$props = this.props,\n            getTodosList = _this$props.getTodosList,\n            page = _this$props.page;\n      const offset = (this.state.currentPage - 1) * 10;\n      getTodosList(ACTIONS.TODOS.GET_TODOS, {\n        limit: this.state.perPage,\n        offset,\n        page\n      });\n    };\n\n    this.handleEdit = id => {\n      const history = this.props.history;\n      history.push(reverse(TODOS_ROUTE.TODOS.DETAIL.MODIFY, {\n        todoId: id\n      }));\n    };\n\n    this.handleDelete = id => {\n      const deleteTodo = this.props.deleteTodo;\n      deleteTodo(ACTIONS.TODOS.DELETE_TODO, {\n        todoId: id\n      });\n    };\n\n    this.state = {\n      perPage: 10,\n      currentPage: 1,\n      start: 1,\n      end: 5\n    };\n    this.onPagination = onPagination.bind(this);\n    this.onPageChange = onPageChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchTodos();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.state.currentPage !== prevState.currentPage) {\n      this.fetchTodos();\n    }\n  }\n\n  render() {\n    const _this$props2 = this.props,\n          page = _this$props2.page,\n          inProgress = _this$props2.inProgress,\n          Data = _this$props2.Data;\n    const _pageConfig$page = pageConfig[page],\n          pageTitle = _pageConfig$page.pageTitle,\n          headerActions = _pageConfig$page.headerActions,\n          redirect = _pageConfig$page.redirect;\n    const totalPages = Data && Data.count ? Math.ceil(Data.count / this.state.perPage) : 0;\n    const paginationData = {\n      start: this.state.start,\n      end: totalPages > 5 ? this.state.end : totalPages,\n      currentPage: this.state.currentPage,\n      onPagination: this.onPagination,\n      onPageChange: this.onPageChange,\n      totalPages: totalPages < 1 ? 1 : totalPages\n    };\n    let todoKey = 0;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(PageLoader, {\n      inProgress: inProgress,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(PageHeader, Object.assign({}, this.props, {\n      title: pageTitle,\n      actions: headerActions,\n      redirect: redirect,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    })), Data && Data.result && Data.result.length > 0 && React.createElement(\"div\", {\n      className: \"row todo-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, Data.result.map(each => {\n      todoKey++;\n      return React.createElement(Todo, {\n        data: each,\n        key: todoKey,\n        handleDelete: this.handleDelete,\n        handleEdit: this.handleEdit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      });\n    }), React.createElement(CustomPagination, Object.assign({}, paginationData, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }))), !(Data && Data.result && Data.result.length > 0) && React.createElement(DataNotFound, {\n      name: \"Todos\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }));\n  }\n\n}\n\nTodos.propTypes = {\n  getTodosList: PropTypes.func.isRequired,\n  page: PropTypes.string.isRequired,\n  match: PropTypes.object.isRequired,\n  inProgress: PropTypes.bool.isRequired,\n  Data: PropTypes.object,\n  history: PropTypes.object.isRequired\n};\nTodos.defaultProps = {\n  Data: {}\n};\n\nconst mapStateToProps = state => ({\n  Data: state.todosReducerStore.data,\n  inProgress: state.todosReducerStore.inProgress\n});\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getTodosList: (type, data) => {\n      dispatch(getActionsFormate(type, data));\n    },\n    resetState: type => {\n      dispatch(getActionsFormate(type));\n    },\n    deleteTodo: (type, data) => {\n      dispatch(getActionsFormate(type, data));\n    }\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Todos));","map":{"version":3,"sources":["/home/nowshad/Desktop/Todo/frontend/src/containers/Todos/Todos.jsx"],"names":["React","PropTypes","connect","withRouter","pageConfig","PageLoader","PageHeader","getActionsFormate","onPagination","onPageChange","DATA_NOT_FOUND","ACTIONS","Todo","DataNotFound","TODOS_ROUTE","reverse","CustomPagination","Todos","Component","constructor","props","fetchTodos","getTodosList","page","offset","state","currentPage","TODOS","GET_TODOS","limit","perPage","handleEdit","id","history","push","DETAIL","MODIFY","todoId","handleDelete","deleteTodo","DELETE_TODO","start","end","bind","componentDidMount","componentDidUpdate","prevProps","prevState","render","inProgress","Data","pageTitle","headerActions","redirect","totalPages","count","Math","ceil","paginationData","todoKey","result","length","map","each","propTypes","func","isRequired","string","match","object","bool","defaultProps","mapStateToProps","todosReducerStore","data","mapDispatchToProps","dispatch","type","resetState"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport pageConfig from '../../utils/pageConfig';\nimport PageLoader from '../../components/PageLoader/PageLoader';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { getActionsFormate } from '../../utils/common';\nimport {\n  onPagination,\n  onPageChange,\n} from '../../utils/utils';\nimport { DATA_NOT_FOUND } from '../../utils/constants';\nimport ACTIONS from '../../apiConfig/actions.constants';\nimport Todo from '../../components/Todo/Todo';\nimport DataNotFound from '../../components/DataNotFound/DataNotFound';\nimport { TODOS_ROUTE } from '../../config';\nimport { reverse } from 'named-urls';\nimport CustomPagination from '../../components/CustomPagination/CustomPagination';\n\nclass Todos extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      perPage: 10,\n      currentPage: 1,\n      start: 1,\n      end: 5\n    };\n    this.onPagination = onPagination.bind(this);\n    this.onPageChange = onPageChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchTodos();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.state.currentPage !== prevState.currentPage) {\n      this.fetchTodos();\n    }\n  }\n\n  fetchTodos = () => {\n    const { getTodosList, page } = this.props;\n    const offset = (this.state.currentPage - 1) * 10;\n    getTodosList(ACTIONS.TODOS.GET_TODOS, {\n      limit: this.state.perPage,\n      offset,\n      page,\n    });\n  };\n\n  handleEdit=(id)=>{\n    const { history } = this.props;\n    history.push(reverse(TODOS_ROUTE.TODOS.DETAIL.MODIFY, {todoId: id}));\n  }\n\n  handleDelete=(id)=>{\n    const {deleteTodo } = this.props;\n    deleteTodo(ACTIONS.TODOS.DELETE_TODO, {todoId:id});\n  }\n\n  render() {\n    const { page, inProgress, Data } = this.props;\n    const { pageTitle, headerActions, redirect } = pageConfig[page];\n    const totalPages =\n      Data && Data.count\n        ? Math.ceil(Data.count / this.state.perPage)\n        : 0;\n    const paginationData = {\n      start: this.state.start,\n      end: totalPages > 5 ? this.state.end : totalPages,\n      currentPage: this.state.currentPage,\n      onPagination: this.onPagination,\n      onPageChange: this.onPageChange,\n      totalPages: totalPages < 1 ? 1 : totalPages\n    };\n    \n    let todoKey = 0;\n    return (\n      <div>\n        <PageLoader inProgress={inProgress} />\n        <PageHeader\n          {...this.props}\n          title={pageTitle}\n          actions={headerActions}\n          redirect={redirect}\n        />\n        \n        {Data && Data.result && Data.result.length>0 && <div className=\"row todo-list\">\n        { Data.result.map(each=>{\n          todoKey++;\n          return <Todo data={each} key={todoKey} handleDelete={this.handleDelete} handleEdit={this.handleEdit}/>\n        })}\n          <CustomPagination {...paginationData} />\n        </div>}\n        {!(Data && Data.result && Data.result.length>0) && <DataNotFound name={\"Todos\"} />}\n        \n      </div>\n    );\n  }\n}\n\nTodos.propTypes = {\n  getTodosList: PropTypes.func.isRequired,\n  page: PropTypes.string.isRequired,\n  match: PropTypes.object.isRequired,\n  inProgress: PropTypes.bool.isRequired,\n  Data: PropTypes.object,\n  history: PropTypes.object.isRequired\n};\n\nTodos.defaultProps = {\n  Data: {}\n};\nconst mapStateToProps = state => ({\n  Data: state.todosReducerStore.data,\n  inProgress: state.todosReducerStore.inProgress\n});\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getTodosList: (type, data) => {\n      dispatch(getActionsFormate(type, data));\n    },\n    resetState: type => {\n      dispatch(getActionsFormate(type));\n    },\n    deleteTodo: (type, data)=>{\n      dispatch(getActionsFormate(type, data));\n    }\n  };\n};\n\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Todos)\n);\n"]},"metadata":{},"sourceType":"module"}