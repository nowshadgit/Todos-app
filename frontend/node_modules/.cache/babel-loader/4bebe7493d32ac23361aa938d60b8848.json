{"ast":null,"code":"import _defineProperty from \"/home/nowshad/Desktop/Todo/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/nowshad/Desktop/Todo/frontend/src/containers/AddEditTodo/AddEditTodo.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { reverse } from 'named-urls';\nimport AddEditTodoForm from '../../components/AddEditTodoForm/AddEditTodoForm';\nimport { PAGE, STORE } from '../../utils/constants';\nimport { getErrorResMsg } from '../../utils/formValidations';\nimport pageConfig from '../../utils/pageConfig';\nimport { getActionsFormate } from '../../utils/common';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport ACTIONS from '../../apiConfig/actions.constants';\nimport { redirect } from '../../utils/utils';\nimport { FOOTPRINTS_ROUTES } from '../../config';\nimport './AddEditTodo.scss';\n\nclass AddEditTodo extends React.Component {\n  constructor(props) {\n    super(props);\n    this.TODO_TITLE = 'asset-type';\n    this.TODO_DESCRIPTION = 'todo-description';\n\n    this.fetchTodoDetails = () => {\n      const _this$props = this.props,\n            page = _this$props.page,\n            getTodoDetails = _this$props.getTodoDetails,\n            match = _this$props.match;\n\n      if (page === PAGE.UPDATE_TODO) {\n        console.log(\"page:\", page, match.params);\n        getTodoDetails(ACTIONS.TODOS.GET_TODO_DETAILS, _objectSpread({}, match.params));\n      }\n    };\n\n    this.enableSubmit = (title, description) => {\n      const disabled = !(title.length > 0 && description.length > 0);\n\n      if (this.props.addEditTodoReducerStore.errorCode) {\n        const type = ACTIONS.TODOS.RESET_STATE;\n        this.props.resetState(type);\n        this.setState({\n          errorCode: ''\n        });\n      }\n\n      this.setState({\n        disabled\n      });\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        [event.target.id]: event.target.value,\n        formErrors: {}\n      }, () => this.enableSubmit(this.state[this.TODO_TITLE], this.state[this.TODO_DESCRIPTION]));\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const data = {\n        title: this.state[this.TODO_TITLE],\n        description: this.state[this.TODO_DESCRIPTION]\n      };\n      const type = pageConfig[this.props.page].actions.postData;\n      this.props.submit(type, {\n        data,\n        props: this.props\n      });\n      this.enableSubmit(this.state[this.TODO_TITLE], this.state[this.TODO_DESCRIPTION]);\n    };\n\n    this.state = {\n      formErrors: {},\n      formValidity: false,\n      [this.ASSET_TYPE_FIELD_ID]: '',\n      [this.TODO_DESCRIPTION]: '',\n      errorCode: '',\n      disabled: true,\n      firstRender: true\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const addEditTodoReducerStore = nextProps.addEditTodoReducerStore,\n          page = nextProps.page;\n    const errorCode = addEditTodoReducerStore.errorCode;\n\n    if (errorCode && errorCode !== prevState.errorCode) {\n      const errMsg = getErrorResMsg(errorCode, page);\n      return {\n        formErrors: errMsg,\n        errorCode\n      };\n    }\n\n    if (nextProps.page === PAGE.UPDATE_TODO && prevState.firstRender && nextProps.details && Object.values(nextProps.details).length > 0) {\n      const attributeDetails = nextProps.details;\n      const id = attributeDetails.values.reduce((max, value) => value.id > max ? value.id : max, attributeDetails.values[0].id);\n      return {\n        'asset-attribute': [{\n          name: attributeDetails.name,\n          id: 0,\n          valueId: id,\n          errors: {},\n          values: attributeDetails.values,\n          initial: attributeDetails.values.length\n        }],\n        edit: true,\n        firstRender: false\n      };\n    }\n\n    return prevState;\n  }\n\n  componentDidMount() {\n    this.fetchTodoDetails();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.state.currentPage !== prevState.currentPage) {\n      this.fetchTodoDetails();\n    }\n  }\n\n  render() {\n    const _this$props2 = this.props,\n          addEditTodoReducerStore = _this$props2.addEditTodoReducerStore,\n          page = _this$props2.page;\n    const inProgress = addEditTodoReducerStore.inProgress,\n          data = addEditTodoReducerStore.data;\n    const pageTitle = pageConfig[page].pageTitle;\n    console.log(\"akjshdsa\", data);\n    return React.createElement(\"div\", {\n      id: \"add-edit-todo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(PageHeader, {\n      title: pageTitle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(AddEditTodoForm, {\n      handleSubmit: this.handleSubmit,\n      handleChange: this.handleChange,\n      disabled: this.state.disabled,\n      todoTitleId: this.TODO_TITLE,\n      todoDescriptionId: this.TODO_DESCRIPTION,\n      todoTitleValue: this.state[this.TODO_TITLE],\n      todoDescriptionValue: this.state[this.TODO_DESCRIPTION],\n      inProgress: inProgress,\n      formErrors: this.state.formErrors,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }));\n  }\n\n}\n\nAddEditTodo.propTypes = {\n  page: PropTypes.string.isRequired,\n  submit: PropTypes.func.isRequired,\n  errorCode: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  resetState: PropTypes.func.isRequired,\n  inProgress: PropTypes.bool.isRequired,\n  addEditTodoReducerStore: PropTypes.object.isRequired,\n  getTodoDetails: PropTypes.func.isRequired\n};\nAddEditTodo.defaultProps = {\n  errorCode: ''\n};\n\nconst mapStateToProps = state => ({\n  addEditTodoReducerStore: state.addEditTodoReducerStore\n});\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    submit: (type, data) => {\n      dispatch(getActionsFormate(type, data));\n    },\n    resetState: type => {\n      dispatch(getActionsFormate(type));\n    },\n    getTodoDetails: (type, data) => {\n      dispatch(getActionsFormate(type, data));\n    }\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(AddEditTodo));","map":{"version":3,"sources":["/home/nowshad/Desktop/Todo/frontend/src/containers/AddEditTodo/AddEditTodo.jsx"],"names":["React","connect","withRouter","PropTypes","reverse","AddEditTodoForm","PAGE","STORE","getErrorResMsg","pageConfig","getActionsFormate","PageHeader","ACTIONS","redirect","FOOTPRINTS_ROUTES","AddEditTodo","Component","constructor","props","TODO_TITLE","TODO_DESCRIPTION","fetchTodoDetails","page","getTodoDetails","match","UPDATE_TODO","console","log","params","TODOS","GET_TODO_DETAILS","enableSubmit","title","description","disabled","length","addEditTodoReducerStore","errorCode","type","RESET_STATE","resetState","setState","handleChange","event","target","id","value","formErrors","state","handleSubmit","preventDefault","data","actions","postData","submit","formValidity","ASSET_TYPE_FIELD_ID","firstRender","getDerivedStateFromProps","nextProps","prevState","errMsg","details","Object","values","attributeDetails","reduce","max","name","valueId","errors","initial","edit","componentDidMount","componentDidUpdate","prevProps","currentPage","render","inProgress","pageTitle","propTypes","string","isRequired","func","oneOfType","number","bool","object","defaultProps","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { reverse } from 'named-urls';\nimport AddEditTodoForm from '../../components/AddEditTodoForm/AddEditTodoForm';\nimport { PAGE, STORE } from '../../utils/constants';\nimport { getErrorResMsg } from '../../utils/formValidations';\nimport pageConfig from '../../utils/pageConfig';\nimport { getActionsFormate } from '../../utils/common';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport ACTIONS from '../../apiConfig/actions.constants';\nimport { redirect } from '../../utils/utils';\nimport { FOOTPRINTS_ROUTES } from '../../config';\nimport './AddEditTodo.scss';\n\nclass AddEditTodo extends React.Component {\n  TODO_TITLE = 'asset-type';\n\n  TODO_DESCRIPTION = 'todo-description';\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      formErrors: {},\n      formValidity: false,\n      [this.ASSET_TYPE_FIELD_ID]: '',\n      [this.TODO_DESCRIPTION]: '',\n      errorCode: '',\n      disabled: true,\n      firstRender: true\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { addEditTodoReducerStore, page } = nextProps;\n    const { errorCode } = addEditTodoReducerStore;\n    if (errorCode && errorCode !== prevState.errorCode) {\n      const errMsg = getErrorResMsg(errorCode, page);\n      return { formErrors: errMsg, errorCode };\n    }\n    if (\n      nextProps.page === PAGE.UPDATE_TODO &&\n      prevState.firstRender &&\n      nextProps.details &&\n      Object.values(nextProps.details).length > 0\n    ) {\n      const attributeDetails = nextProps.details;\n      const id = attributeDetails.values.reduce(\n        (max, value) => (value.id > max ? value.id : max),\n        attributeDetails.values[0].id\n      );\n      return {\n        'asset-attribute': [\n          {\n            name: attributeDetails.name,\n            id: 0,\n            valueId: id,\n            errors: {},\n            values: attributeDetails.values,\n            initial: attributeDetails.values.length\n          }\n        ],\n        edit: true,\n        firstRender: false\n      };\n    }\n    return prevState;\n  }\n\n  componentDidMount() {\n    this.fetchTodoDetails();\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    if (this.state.currentPage !== prevState.currentPage) {\n      this.fetchTodoDetails();\n    }\n  }\n\n  fetchTodoDetails= ()=>{\n    const { page, getTodoDetails, match} = this.props;\n    if(page === PAGE.UPDATE_TODO){\n      console.log(\"page:\",page, match.params);\n      getTodoDetails(ACTIONS.TODOS.GET_TODO_DETAILS, {...match.params})\n    }\n  }\n\n  enableSubmit = (title, description) => {\n    const disabled = !(title.length > 0 && description.length > 0);\n\n    if (this.props.addEditTodoReducerStore.errorCode) {\n      const type = ACTIONS.TODOS.RESET_STATE;\n      this.props.resetState(type);\n      this.setState({ errorCode: '' });\n    }\n    this.setState({ disabled });\n  };\n\n  handleChange = event => {\n    this.setState(\n      {\n        [event.target.id]: event.target.value,\n        formErrors: {}\n      },\n      () =>\n        this.enableSubmit(\n          this.state[this.TODO_TITLE],\n          this.state[this.TODO_DESCRIPTION],\n        )\n    );\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    const data = {\n      title: this.state[this.TODO_TITLE],\n      description: this.state[this.TODO_DESCRIPTION]\n    };\n    const type = pageConfig[this.props.page].actions.postData;\n    this.props.submit(type, {data, props:this.props});\n    this.enableSubmit(\n      this.state[this.TODO_TITLE],\n      this.state[this.TODO_DESCRIPTION]\n    );\n  };\n\n  render() {\n    const { addEditTodoReducerStore, page } = this.props;\n    const { inProgress, data } = addEditTodoReducerStore;\n    const { pageTitle } = pageConfig[page];\n    console.log(\"akjshdsa\", data);\n    return (\n      <div id=\"add-edit-todo\">\n        <PageHeader title={pageTitle} />\n        <AddEditTodoForm\n          handleSubmit={this.handleSubmit}\n          handleChange={this.handleChange}\n          disabled={this.state.disabled}\n          todoTitleId={this.TODO_TITLE}\n          todoDescriptionId={this.TODO_DESCRIPTION}\n          todoTitleValue={this.state[this.TODO_TITLE]}\n          todoDescriptionValue={this.state[this.TODO_DESCRIPTION]}\n          inProgress={inProgress}\n          formErrors={this.state.formErrors}\n        />\n      </div>\n    );\n  }\n}\n\nAddEditTodo.propTypes = {\n  page: PropTypes.string.isRequired,\n  submit: PropTypes.func.isRequired,\n  errorCode: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  resetState: PropTypes.func.isRequired,\n  inProgress: PropTypes.bool.isRequired,\n  addEditTodoReducerStore: PropTypes.object.isRequired,\n  getTodoDetails: PropTypes.func.isRequired\n};\n\nAddEditTodo.defaultProps = {\n  errorCode: '',\n};\n\nconst mapStateToProps = state => ({\n  addEditTodoReducerStore: state.addEditTodoReducerStore,\n\n});\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    submit: (type, data) => {\n      dispatch(getActionsFormate(type, data));\n    },\n    resetState: type => {\n      dispatch(getActionsFormate(type));\n    },\n    getTodoDetails: (type, data) => {\n      dispatch(getActionsFormate(type,data));\n    }\n  };\n};\n\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(AddEditTodo)\n);\n"]},"metadata":{},"sourceType":"module"}